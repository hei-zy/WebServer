# High Performance WebServer
------------
* 参考muduo网络库与《Linux高性能服务器编程》实现高并发服务器（目前实现了[高效的双缓冲异步日志系统](https://github.com/hei-zy/WebServer/tree/master/src/base) ）
     
# Log设计
Log的实现分为前端和后端，前端往后端写，后端往磁盘写。Log前端是前面所述的IO线程，负责产生log，后端是Log线程，设计了多个缓冲区，负责收集前端产生的log，集中往磁盘写
后端主要是由多个缓冲区构成的，集满了或者时间到了就向文件写一次。日志系统主要由以下五个类组成：
* __FileUtil__ 最底层的文件类AppendFile，封装了Log文件的打开、写入并在类析构的时候关闭文件，底层使用了标准IO，该append函数直接向文件写。
* __LogFile__ 封装AppendFile，加锁实现线程安全，并满足一定条件时（时间，次数，缓冲区写满等）刷新缓存区，并更换文件。
* __AsyncLogging__ 负责启动一个log线程，专门用来将log写入LogFile，应用了“双缓冲技术”，双缓冲区不够时，自动创建多个缓冲区。但当数据过多，缓冲区数量过多，只保留前两个缓冲区，删除多余缓冲区中的数据。AsyncLogging负责(定时到或被填满时)将缓冲区中的数据写入LogFile中。
* __LogStream__ 主要用来格式化输出，重载了<<运算符，同时也有自己的一块缓冲区，这里缓冲区的存在是为了缓存一行，把多个<<的结果连成一块。并且可通过设置回调函数，自定义日志输出函数（指定日志日志输出方式，文件）。
* __Logging__ 对外接口，通过宏函数创建logger临时对象，logger对象中内涵logStream对象，实现格式化打印日志信息。